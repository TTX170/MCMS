{% extends 'base.html' %}
{% block content %}
<h1>Bulk Config Change</h1>

<h2> Please Select the organisation and network you wish to backup or restore </h2>

<form method="post">
    <select class="form-control" name="backupid">
	<option>Select backup</option>
	{%for i,j in backups.items%}
	<option value={{j}}>{{i}}</option>
	{%endfor%}
  </select>
    <select class="form-control" name="orgoid">
		<option>Select Org</option>
		{%for i,j in orgs.items%}
		<option value = {{j}}>{{i}}</option>
		{%endfor%}
	</select>
	 <select class="form-control" name="netid">
		<option>Select Network</option>
		<option>All</option>
		{%for i,j in nets.items%}
		<option>{{i}}</option>
		{%endfor%}
	</select>
	<button type="submit" name="refresh" class="btn btn-primary">Refresh Networks</button>
	<input type="text" name="backupname" placeholder="Name of Backup Here">
	<button type="submit" name="backup" class="btn btn-primary">Backup Changes</button>
	<button type="submit" name="preview" class="btn btn-primary">Preview Restore</button>
	<button type="submit" name="restore" class="btn btn-danger">Restore</button>
	{% csrf_token %}
  </form>
  
  <!-- <form action "/configure/backup" method="post">
	<select class="form-control" name="backupid">
	<option>Select backup</option>
	{%for i,j in backups.items%}
	<option value={{j}}>{{i}}</option>
	{%endfor%}
  </select>
  
  </form> -->
  <p>Switch Ports</p>
  <div class="table-responsive">
	  <table class="table">
		  <thead>
			<tr>
			  <th scope="col">Serial</th>
			  <th scope="col">Network Name</th>
			  <th scope="col">Port Name</th>
			  <th scope="col">Port Number</th>
			  <th scope="col">Enabled</th>
			  <th scope="col">Type</th>
			  <th scope="col">Vlan</th>
			  <th scope="col">Voice Vlan</th>
			  <th scope="col">Rstp Enabled</th>
			  <th scope="col">Stp Guard</th>
			  <th scope="col">Poe Enabled</th>			  
			</tr>
		  </thead>
		  <tbody>
			  {% for i in switch%}
			  <tr>
				  <td>{{i.serial}}</td>
				  <td>{{i.netname}}</td>
				  <td>{{i.portname}}</td>
				  <td>{{i.number}}</td>
				  <td>{{i.enabled}}</td>
				  <td>{{i.porttype}}</td>
				  <td>{{i.vlan}}</td>
				  <td>{{i.voicevlan}}</td>
				  <td>{{i.rstp}}</td>
				  <td>{{i.stp}}</td>
				  <td>{{i.poe}}</td>				  
			  </tr>
			  {% endfor %}
		  </tbody>
	  </table>  
  </div>
  <p>Vlans</p>
  <div class="table-responsive">
	  <table class="table">
		  <thead>
			<tr>
			  
			  <th scope="col">Network Name</th>
			  <th scope="col">Vlan ID</th>
			  <th scope="col">Vlan Name</th>
			  <th scope="col">Subnet</th>
			  <th scope="col">MX IP</th>
			  <th scope="col">Dhcp Status</th>
			  <th scope="col">Dhcp Relay Server</th>
			  
			</tr>
		  </thead>
		  <tbody>
			  {% for i in vlans%}
			  <tr>
				  
				  <td>{{i.netname}}</td>
				  <td>{{i.vlan}}</td>
				  <td>{{i.vlanname}}</td>
				  <td>{{i.subnet}}</td>
				  <td>{{i.mxip}}</td>
				  <td>{{i.dhcpstatus}}</td>
				  <td>{{i.dhcprelayservers}}</td>
			  </tr>
			  {% endfor %}
		  </tbody>
	  </table>  
  </div>
    <p>Mx Ports</p>
  <div class="table-responsive">
	  <table class="table">
		  <thead>
			<tr>
			  <th scope="col">Network Name</th>
			  <th scope="col">Port Number</th>
			  <th scope="col">Enabled</th>
			  <th scope="col">Port Type</th>
			  <th scope="col">Drop Untagged Traffic</th>
			  <th scope="col">Vlan</th>
			  <th scope="col">Allowed Vlans</th>
			</tr>
		  </thead>
		  <tbody>
			  {% for i in mxports%}
			  <tr>
				  <td>{{i.netname}}</td>
				  <td>{{i.number}}</td>
				  <td>{{i.enabled}}</td>
				  <td>{{i.porttype}}</td>
				  <td>{{i.dropuntag}}</td>
				  <td>{{i.vlan}}</td>
				  <td>{{i.allowedvlans}}</td>
			  </tr>
			  {% endfor %}
		  </tbody>
	  </table>  
  </div>
{% endblock %}